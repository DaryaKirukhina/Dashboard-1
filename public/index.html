<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Дашборд видеопродакшн проектов</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<header class="app-header">
  <img id="projectLogo" src="./logo/LOGO_RGB_black.png" alt="Project Logo" class="project-logo" />
</header>
<body>
  <div id="app">

    <!-- Project List Screen -->
    <div class="screen active" id="projectListScreen">
      <div class="header">
        <h1>Мои проекты</h1>
        <div class="project-controls">
          <button id="editDatesBtn" class="icon-btn" title="Внести изменения">
            <img src="./logo/edit.png" alt="Редактировать" class="icon-img">
          </button>
          <button id="saveDatesBtn" class="icon-btn" title="Сохранить" disabled>
            <img src="./logo/save.png" alt="Сохранить" class="icon-img">
          </button>
        </div>
      </div>
      <div id="projectsContainer" class="projects-container"></div>
    </div>
    <!-- Project Detail Screen -->
    <div class="screen" id="projectDetailScreen">
      <div class="header">
        <img src="./logo/arrow-fold-back.png" alt="Назад" class="back-btn" onclick="goBack()">
        <h2 id="stageHeader"></h2>
        <div class="project-controls">
          <!-- Пара кнопок для редактирования статусов -->
          <button id="editTasksBtn" class="icon-btn" title="Редактировать">
            <img src="./logo/edit.png" alt="Редактировать" class="icon-img">
          </button>
          <button id="saveTasksBtn" class="icon-btn" title="Сохранить" disabled>
            <img src="./logo/save.png" alt="Сохранить" class="icon-img">
          </button>
        </div>
      </div>
      <!-- Pre-production Section -->
      <div class="section">
        <div class="section-header" onclick="toggleSection('pre')">
          <h2>Pre-production <span id="prePercent">100%</span></h2>
          <button class="collapse-btn" id="preCollapseBtn">∨</button>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="preProgressBar"></div>
        </div>
        <div class="tasks-grid" id="preTasksContainer"></div>
      </div>

      <!-- Post-production Section -->
      <div class="section">
        <div class="section-header" onclick="toggleSection('post')">
          <h2>Post-production <span id="postPercent">0%</span></h2>
          <button class="collapse-btn" id="postCollapseBtn">∧</button>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="postProgressBar"></div>
        </div>
        <div class="tasks-grid" id="tasksGrid"></div>
      </div>
    </div>

    <!-- Task Detail Screen - ОТДЕЛЬНЫЙ экран на том же уровне -->
    <div class="screen" id="taskDetailScreen">
      <div class="header">
        <img src="./logo/arrow-fold-back.png" alt="Назад" class="back-btn" onclick="goBack()">
        <h1 id="taskDetailTitle">Задача</h1>
        <!-- Можно добавить свои кнопки для этой страницы, если нужно -->
      </div>
      <div class="task-detail-content">
        <p id="taskDeadline" class="deadline"></p>
        <div id="taskLinks" class="link-section"></div>
      </div>
    </div>

    <script src="script.js"></script>
  </div>
</body>
</html>
